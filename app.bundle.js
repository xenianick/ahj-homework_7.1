!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){var i,o,r;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/o=[e,t],void 0===(r="function"==typeof(i=function(e,t){"use strict";var n,i,o="function"==typeof Map?new Map:(n=[],i=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return i[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),i.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),i.splice(t,1))}}),r=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){r=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function d(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var t,n=null,i=null,d=null,a=function(){e.clientWidth!==i&&p()},s=function(t){window.removeEventListener("resize",a,!1),e.removeEventListener("input",p,!1),e.removeEventListener("keyup",p,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",p,!1),Object.keys(t).forEach((function(n){e.style[n]=t[n]})),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",p,!1),window.addEventListener("resize",a,!1),e.addEventListener("input",p,!1),e.addEventListener("autosize:update",p,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:s,update:p}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),p()}function c(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function l(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",i=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function p(){l();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),i="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(i<t?"hidden"===n.overflowY&&(c("scroll"),l(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),l(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),d!==i){d=i;var o=r("autosize:resized");try{e.dispatchEvent(o)}catch(e){}}}}function a(e){var t=o.get(e);t&&t.destroy()}function s(e){var t=o.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return d(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],a),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e}),t.default=c,e.exports=t.default})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(1);function i(e,t,n=""){const i=document.createElement(e);return i.className=t,i.innerHTML=n,i}async function o(e,t){const n=new URLSearchParams;let i="https://ahj-homework-7-1-7-2.herokuapp.com/tickets";const o=new Promise(o=>{Object.entries(e).forEach(([e,t])=>{n.append(e,t)}),"GET"===t&&""===e&&(i="https://ahj-homework-7-1-7-2.herokuapp.com/tickets"),"GET"===t&&""!==e&&(i=`https://ahj-homework-7-1-7-2.herokuapp.com/tickets/:${n}`),"DELETE"===t&&(i=`https://ahj-homework-7-1-7-2.herokuapp.com/tickets/:${n}`);const r=new XMLHttpRequest;r.open(t,i),r.addEventListener("readystatechange",()=>{4===r.readyState&&200===r.status&&o(r.response)}),"GET"===t||"DELETE"===t?r.send():r.send(n)});return await o}var r=n(0),d=n.n(r);function a(e){const t=document.querySelector("body"),n=i("div","ticket-adding-popup"),o=i("div","ticket-adding-header",`<p>${e}</p>`),r=i("form","ticket-adding-form");r.name="ticketForm";const a=i("div","ticket-name-header","<p>Краткое описание</p>"),s=i("textarea","ticket-name-field");s.required=!0,d()(s),r.appendChild(a),r.appendChild(s);const c=i("div","ticket-description-header","<p>Полное описание</p>"),l=i("textarea","ticket-description-field");l.required=!0,d()(l),r.appendChild(c),r.appendChild(l);const p=i("button","ticket-save-btn btn","Ок"),u=i("button","ticket-reset-btn btn","Отмена");return u.type="reset",r.appendChild(p),r.appendChild(u),n.appendChild(o),n.appendChild(r),t.insertBefore(n,t.lastChild),[n,r,s,l,u]}function s(e){const t=i("div","ticket-card"),n=i("div","ticket-card-body"),r=i("div","ticket-checkbox"),d=i("div","ticket-status-check","&#10004;");function s(e){return"true"===e}e.status=s(e.status),!1===e.status&&d.classList.add("disabled"),r.appendChild(d);const c=i("div","ticket-name",`<p>${e.name}</p>`),l=i("div","ticket-date",`<p>${e.created}</p>`),p=i("div","ticket-card-actions-container"),u=i("div","ticket-edit-btn","&#9998;"),h=i("div","ticket-remove-btn","&#10006;"),f=i("div","ticket-description disabled");let v=!1;const m=i("div","loading-icon-container",'<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.0" width="100px" height="25px" viewBox="0 0 128 16" xml:space="preserve"><script type="text/ecmascript" xlink:href="//faviconer.net/jscripts/smil.user.js"/><path fill="#9e9ec3" fill-opacity="0.42" d="M6.4,4.8A3.2,3.2,0,1,1,3.2,8,3.2,3.2,0,0,1,6.4,4.8Zm12.8,0A3.2,3.2,0,1,1,16,8,3.2,3.2,0,0,1,19.2,4.8ZM32,4.8A3.2,3.2,0,1,1,28.8,8,3.2,3.2,0,0,1,32,4.8Zm12.8,0A3.2,3.2,0,1,1,41.6,8,3.2,3.2,0,0,1,44.8,4.8Zm12.8,0A3.2,3.2,0,1,1,54.4,8,3.2,3.2,0,0,1,57.6,4.8Zm12.8,0A3.2,3.2,0,1,1,67.2,8,3.2,3.2,0,0,1,70.4,4.8Zm12.8,0A3.2,3.2,0,1,1,80,8,3.2,3.2,0,0,1,83.2,4.8ZM96,4.8A3.2,3.2,0,1,1,92.8,8,3.2,3.2,0,0,1,96,4.8Zm12.8,0A3.2,3.2,0,1,1,105.6,8,3.2,3.2,0,0,1,108.8,4.8Zm12.8,0A3.2,3.2,0,1,1,118.4,8,3.2,3.2,0,0,1,121.6,4.8Z"/><g transform="translate(113 0)"><path fill="#191970" fill-opacity="1" d="M-42.7,3.84A4.16,4.16,0,0,1-38.54,8a4.16,4.16,0,0,1-4.16,4.16A4.16,4.16,0,0,1-46.86,8,4.16,4.16,0,0,1-42.7,3.84Zm12.8-.64A4.8,4.8,0,0,1-25.1,8a4.8,4.8,0,0,1-4.8,4.8A4.8,4.8,0,0,1-34.7,8,4.8,4.8,0,0,1-29.9,3.2Zm12.8-.64A5.44,5.44,0,0,1-11.66,8a5.44,5.44,0,0,1-5.44,5.44A5.44,5.44,0,0,1-22.54,8,5.44,5.44,0,0,1-17.1,2.56Z"/><animateTransform attributeName="transform" type="translate" values="23 0;36 0;49 0;62 0;74.5 0;87.5 0;100 0;113 0;125.5 0;138.5 0;151.5 0;164.5 0;178 0" calcMode="discrete" dur="1560ms" repeatCount="indefinite"/></g></svg>');p.appendChild(u),p.appendChild(h),n.appendChild(r),n.appendChild(c),n.appendChild(l),n.appendChild(p),t.appendChild(n),t.appendChild(f);const y=[u,h,r,d];async function w(){"deleted"===await o({id:e.id},"DELETE")&&t.remove()}return t.addEventListener("click",t=>{y.every(e=>t.target!==e)&&(v?(f.classList.add("disabled"),v=!1):(f.classList.remove("disabled"),v=!0,""===f.innerHTML&&(f.appendChild(m),async function(){const t=await o({id:e.id},"GET");setTimeout(()=>{m.remove(),f.innerHTML=`<p>${t}</p>`},500)}())))}),r.addEventListener("click",()=>{!0===e.status?e.status=!1:e.status=!0,async function(){let t=await o({id:e.id,status:e.status},"PATCH");t=s(t),!0===t?d.classList.remove("disabled"):d.classList.add("disabled")}()}),u.addEventListener("click",()=>{const t=a("Изменить тикет"),[n,i,r,d,s]=t;r.value=e.name,d.value=e.description,i.addEventListener("submit",t=>{t.preventDefault(),e.name=r.value,e.description=d.value,async function(){let t=await o(e,"PUT");t=JSON.parse(t);const[i,r]=t;c.innerHTML=`<p>${i}</p>`,f.innerHTML=`<p>${r}</p>`,n.remove()}()}),s.addEventListener("click",()=>{n.remove()})}),h.addEventListener("click",()=>{!function(e){const t=document.querySelector("body"),n=i("div","ticket-delete-popup"),o=i("div","ticket-delete-header","<p>Удалить тикет</p>"),r=i("div","ticket-delete-text","<p>Вы уверены, что хотите удалить тикет?</p><p>Это дествие необратимо.</p>"),d=i("div","ticket-delete-btns-container"),a=i("button","ticket-delete-btn btn","Ок");a.type="button";const s=i("button","ticket-keep-btn btn","Отмена");s.type="button",d.appendChild(a),d.appendChild(s),n.appendChild(o),n.appendChild(r),n.appendChild(d),t.insertBefore(n,t.lastChild),a.addEventListener("click",()=>{e(),n.remove()}),s.addEventListener("click",()=>{n.remove()})}(w)}),t}class c{constructor(e,t){this.name=e,this.description=t,this.status=!1,this.created=function(){let e=new Date;function t(e){let t=e.toString();return 1===t.length&&(t=`0${t}`),t}let n=e.getFullYear();n=n.toString().substring(2,4);let i=e.getMonth()+1;i=t(i);let o=e.getDate();o=t(o);let r=e.getHours();r=t(r);let d=e.getMinutes();return d=t(d),e=`${o}.${i}.${n} ${r}:${d}`,e}(),this.id=null}}const l=document.querySelector("body"),p=i("div","main-container"),u=i("div","header-container"),h=i("div","add-ticket-btn","<p>Добавить тикет</p>");u.appendChild(h);const f=i("div","tickets-container");var v;p.appendChild(u),p.appendChild(f),l.insertBefore(p,l.firstChild),v=f,async function(){let e=await o("","GET");e=JSON.parse(e),e.length>0&&e.forEach(e=>{const t=s(e);v.appendChild(t)})}(),h.addEventListener("click",()=>{const e=a("Добавить тикет"),[t,n,i,r,d]=e;n.addEventListener("submit",e=>{e.preventDefault();const d=new c(i.value,r.value);!async function(){const e=await o(d,"POST");d.id=e;const i=s(d);f.appendChild(i),n.reset(),t.remove()}()}),d.addEventListener("click",()=>{t.remove()})})}]);